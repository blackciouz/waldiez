/**
 * SPDX-License-Identifier: Apache-2.0
 * Copyright 2024 - 2025 Waldiez & contributors
 */

/* Light/Dark mode variables */
body.waldiez-light .markdown-renderer {
  --md-text: #333;
  --md-link: #0366d6;
  --md-code-bg: rgb(0 0 0 / 5%);
  --md-blockquote-border: #ddd;
  --md-blockquote-text: #666;
  --md-table-border: #e1e4e8;
  --md-table-bg-alt: #f6f8fa;
  --md-pre-bg: #f5f5f5;
  --md-code-block-header: #e9ecef;
  --md-heading-border: #eaecef;
}

body.waldiez-dark .markdown-renderer {
  --md-text: #eee;
  --md-link: #58a6ff;
  --md-code-bg: rgb(255 255 255 / 10%);
  --md-blockquote-border: #444;
  --md-blockquote-text: #aaa;
  --md-table-border: #444;
  --md-table-bg-alt: #21262d;
  --md-pre-bg: #282c34;
  --md-code-block-header: #21252b;
  --md-heading-border: #30363d;
}

.markdown-renderer.markdown-light {
  --md-text: #333;
  --md-link: #0366d6;
  --md-code-bg: rgb(0 0 0 / 5%);
  --md-blockquote-border: #ddd;
  --md-blockquote-text: #666;
  --md-table-border: #e1e4e8;
  --md-table-bg-alt: #f6f8fa;
  --md-pre-bg: #f5f5f5;
  --md-code-block-header: #e9ecef;
  --md-heading-border: #eaecef;
}

.markdown-renderer.markdown-dark {
  --md-text: #eee;
  --md-link: #58a6ff;
  --md-code-bg: rgb(255 255 255 / 10%);
  --md-blockquote-border: #444;
  --md-blockquote-text: #aaa;
  --md-table-border: #444;
  --md-table-bg-alt: #21262d;
  --md-pre-bg: #282c34;
  --md-code-block-header: #21252b;
  --md-heading-border: #30363d;
}

/* Base container */
/* stylelint-disable-next-line no-descending-specificity */
.markdown-renderer {
  width: 100%;
  font-size: inherit;
  line-height: 1.4;
  overflow-wrap: anywhere;
}

/* Headings */
.markdown-h1,
.markdown-h2,
.markdown-h3,
.markdown-h4,
.markdown-h5,
.markdown-h6 {
  margin-top: 1em;
  margin-bottom: 0.5em;
  font-weight: 600;
  line-height: 1.25;
}

.markdown-h1 {
  font-size: 1.4em;
  padding-bottom: 0.2em;
  border-bottom: 1px solid var(--md-heading-border);
}

.markdown-h2 {
  font-size: 1.3em;
  padding-bottom: 0.2em;
  border-bottom: 1px solid var(--md-heading-border);
}

.markdown-h3 {
  font-size: 1.2em;
}

.markdown-h4 {
  font-size: 1.1em;
}

.markdown-h5 {
  font-size: 1em;
}

.markdown-h6 {
  font-size: 0.9em;
  color: var(--md-blockquote-text);
}

/* Paragraphs */
.markdown-p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

/* Lists */
.markdown-ul,
.markdown-ol {
  padding-left: 1.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.markdown-li {
  margin-bottom: 0.25em;
}

.markdown-li .markdown-p {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
}

/* Blockquotes */
.markdown-blockquote {
  margin: 0.5em 0;
  padding-left: 1em;
  color: var(--md-blockquote-text);
  border-left: 3px solid var(--md-blockquote-border);
}

/* Code blocks and inline code */
.markdown-pre,
.markdown-code-block-wrapper {
  margin: 0.5em 0;
  border-radius: 6px;
  overflow: auto;
  max-width: 100%;
  width: auto;
  display: block;
  color: var(--md-text) !important;
}

.markdown-pre {
  padding: 0.8em;
  background-color: var(--md-pre-bg);
  color: var(--md-text) !important;
}

.markdown-code {
  font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
  white-space: pre;
  overflow-x: auto;
  max-width: 100%;
  color: var(--md-text) !important;
}

.markdown-inline-code {
  background-color: var(--md-code-bg);
  border-radius: 3px;
  font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
  font-size: 0.9em;
  padding: 0.2em 0.4em;
}

.markdown-code-block-header {
  display: flex;
  align-items: center;
  padding: 0.4em 0.8em;
  background-color: var(--md-code-block-header);
  color: var(--md-text) !important;
  font-size: 0.8em;
  font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
}

.markdown-code-language {
  text-transform: uppercase;
  font-weight: 600;
}

/* Fix pre and code overflow */
.message-content .markdown-pre,
.message-content .markdown-code,
.message-content .markdown-code-block-wrapper {
  max-width: 100%;
  overflow-x: auto;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: normal;
}

/* Tables */
.markdown-table {
  border-collapse: collapse;
  margin: 0.5em 0;
  display: block;
  width: 100%;
  max-width: 100%;
  overflow-x: auto;
}

.markdown-table th,
.markdown-table td {
  border: 1px solid var(--md-table-border);
  padding: 0.4em 0.6em;
}

.markdown-table th {
  font-weight: 600;
}

.markdown-table tr {
  background-color: transparent;
  border-top: 1px solid var(--md-table-border);
}

.markdown-table tr:nth-child(2n) {
  background-color: var(--md-table-bg-alt);
}

/* Links */
.markdown-link {
  color: var(--md-link);
  text-decoration: none;
}

.markdown-link:hover {
  text-decoration: underline;
}

/* Images - use existing .chat-image class */
.markdown-image {
  max-width: 100%;
  border-radius: 8px;
  cursor: pointer;
}

/* Horizontal rule */
.markdown-hr {
  height: 1px;
  margin: 1em 0;
  background-color: var(--md-table-border);
  border: none;
}

/* Adjust for message bubbles */
.user-message .markdown-link {
  color: #fff;
  text-decoration: underline;
}

.user-message .markdown-blockquote {
  border-left-color: rgb(255 255 255 / 50%);
  color: rgb(255 255 255 / 80%);
}

.user-message .markdown-inline-code {
  background-color: rgb(255 255 255 / 20%);
  color: #fff;
}

/* Mobile adjustments */
@media (width <= 768px) {
  .markdown-table {
    font-size: 0.9em;
  }

  .markdown-pre {
    padding: 0.6em;
  }

  .markdown-h1 {
    font-size: 1.3em;
  }

  .markdown-h2 {
    font-size: 1.2em;
  }
}

/* Syntax highlighting for code blocks */
.language-js .keyword,
.language-javascript .keyword,
.language-typescript .keyword,
.language-jsx .keyword,
.language-tsx .keyword {
  color: #569cd6;
}

.language-js .string,
.language-javascript .string,
.language-typescript .string,
.language-jsx .string,
.language-tsx .string {
  color: #ce9178;
}

.language-js .comment,
.language-javascript .comment,
.language-typescript .comment,
.language-jsx .comment,
.language-tsx .comment {
  color: #6a9955;
}

/* Dark mode syntax highlighting (override if necessary) */
body.waldiez-dark .language-js .keyword,
body.waldiez-dark .language-javascript .keyword,
body.waldiez-dark .language-typescript .keyword,
body.waldiez-dark .language-jsx .keyword,
body.waldiez-dark .language-tsx .keyword {
  color: #569cd6;
}

body.waldiez-dark .language-js .string,
body.waldiez-dark .language-javascript .string,
body.waldiez-dark .language-typescript .string,
body.waldiez-dark .language-jsx .string,
body.waldiez-dark .language-tsx .string {
  color: #ce9178;
}

body.waldiez-dark .language-js .comment,
body.waldiez-dark .language-javascript .comment,
body.waldiez-dark .language-typescript .comment,
body.waldiez-dark .language-jsx .comment,
body.waldiez-dark .language-tsx .comment {
  color: #6a9955;
}
